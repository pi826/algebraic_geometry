\documentclass[dvipdfmx,a4paper,11pt]{jsbook}

% 数式
\usepackage{amsmath,amsfonts}
\usepackage[mathcal]{euscript}
\usepackage{mathtools}
\usepackage{xcolor}
\usepackage{xcoffins,calc}
\usepackage{bm}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{pgf}
\usepackage{tcolorbox}
\usepackage{titlesec}
\usepackage{ifthen}
\usepackage{mathrsfs}
\usepackage[scr]{rsfso}
\usepackage{relsize}
\usepackage{makeidx}
\usepackage{etoolbox}
\usepackage{footnote}
\usepackage[all]{xy}



% 画像
% \usepackage[dvipdfmx]{graphicx,color}

\usepackage[%
dvipdfmx, %欧文ではコメントアウトする
setpagesize=false,
bookmarks=true,
bookmarksdepth=tocdepth,
bookmarksnumbered=true,
colorlinks=true,
linkcolor=blue,
citecolor=blue,
urlcolor=blue,
pdftitle={},
pdfsubject={},
pdfauthor={},
pdfkeywords={}
]{hyperref}

\usepackage{pxjahyper}
\usepackage{tikz}
\usetikzlibrary{intersections,calc,arrows.meta,arrows}
\usetikzlibrary{hobby}
\usetikzlibrary{decorations.markings}
\usepackage{wrapfig}
\usepackage[truedimen,top=25truemm,bottom=30truemm,hmargin=25truemm]{geometry}
\usepackage{calc}
\usepackage{fancyhdr}
\pagestyle{fancy}


\usepackage{fancyhdr}
\usepackage{titlesec} % カスタムマーク用

\pagestyle{fancy}
\fancyhf{} % 全てのヘッダーとフッターをクリア

\fancyhead[LE,RO]{\thepage} % 左側の偶数ページと右側の奇数ページにページ番号を表示
\fancyhead[RE]{\nouppercase{\leftmark}} % 右側の偶数ページに章名を元の文体で表示
\fancyhead[LO]{\nouppercase{\rightmark}} % 左側の奇数ページにsection名を元の文体で表示

\renewcommand{\headrulewidth}{0.4pt} % ヘッダーの線の太さを設定
\renewcommand{\footrulewidth}{0pt} % フッターの線の太さを設定

% マークのカスタマイズ
\renewcommand{\sectionmark}[1]{\markright{#1}}

% \makeatletter
% \let\old@rule\@rule
% \def\@rule[#1]#2#3{\textcolor{blue}{\old@rule[#1]{#2}{#3}}}
% \makeatother
% \newtcolorbox{mybox}[2][]{enhanced,skin=enhancedlast jigsaw,
% attach boxed title to top left={xshift=-4mm,yshift=-0.5mm},
% fonttitle=\bfseries\sffamily,varwidth boxed title=0.7\linewidth,
% colbacktitle=blue!45!white,colframe=red!50!black,
% interior style={top color=blue!10!white,bottom color=red!10!white},
% boxed title style={empty,arc=0pt,outer arc=0pt,boxrule=0pt},
% underlay boxed title={
% \fill[blue!45!white] (title.north west) -- (title.north east)
% -- +(\tcboxedtitleheight-1mm,-\tcboxedtitleheight+1mm)
% -- ([xshift=4mm,yshift=0.5mm]frame.north east) -- +(0mm,-1mm)
% -- (title.south west) -- cycle;
% \fill[blue!45!white!50!black] ([yshift=-0.5mm]frame.north west)
% -- +(-0.4,0) -- +(0,-0.3) -- cycle;
% \fill[blue!45!white!50!black] ([yshift=-0.5mm]frame.north east)
% -- +(0,-0.3) -- +(0.4,0) -- cycle; },
% title={#2},#1}

% chapter 
\titleformat{\chapter}[block]
{}{}{0pt}{
\ifthenelse{\value{chapter}=0}{}
{\vspace*{-2cm}}\fontsize{27pt}{30pt}\selectfont\filleft
}[
\ifthenelse{\value{chapter}=0}{\hrule}{\titleline{
\hspace{225pt}
\begin{tikzpicture}
\draw [thick,line width = 0.4pt] (0,0) -- (7.5cm,0);
\draw [thick,line width = 0.4pt] (6.5cm,2cm)-- (6.5cm,-1cm);
% \draw [line width = 0.4pt] (6.5cm,1cm) -- (6.5cm,-1cm);
\end{tikzpicture}}}
\Large{\filleft \ifthenelse{\value{chapter}=0}{}{\vspace*{-1cm}第 \thechapter 章}}
]



\makeatletter
\def\Section{\@ifstar{\@Section[2pt]}{\@Section[\z@]}}
%
\def\@Section[#1]#2{\ifdim #1<1pt\refstepcounter{section}\fi%
\section*{\nopagebreak[4] \vskip.5pc%
\ifdim #1<1pt%
\addcontentsline{toc}{section}{\protect\numberline{\thesection}#2}%
\quad \textbf{\thesection~} \fi \raisebox{-1.5ex}[0pt][0pt]{\color[rgb]{0.6,0.8,1}{\rule{3mm}{2em}}} #2\nopagebreak[4]%
\vskip.25pc \hrule\@height 1pt\nopagebreak[4] \vskip1pc}}
\makeatother

% % 定理環境の設定
\tcbuselibrary{skins, breakable, theorems}
\usepackage{cleveref}
% \newcommand{\kara}{}
% \newtcolorbox[auto counter, number within = section, crefname = {Def.}{Defs.}]{definition}[3][]{enhanced, breakable = true, fonttitle = \bfseries,title = Def.~\thetcbcounter~\if #2\kara \else (#2) \fi, #1, label = the:#3, boxrule=0pt, frame hidden, borderline west={4pt}{0pt}{green!75!black},
% colback=green!10!white,sharp corners}



% \newtheorem{theorem}{Theorem}[section]
% \tcolorboxenvironment{theorem}{
%   colback=blue!5!white,
%   boxrule=0pt,
%   boxsep=1pt,
%   left=2pt,right=2pt,top=2pt,bottom=2pt,
%   oversize=2pt,
%   sharp corners,
%   before skip=\topsep,
%   after skip=\topsep,
% }




\renewcommand{\qedsymbol}{$\blacksquare$}
\newcommand{\Claim}[1]{\underline{\textbf{Claim#1.}}}

\newcommand{\kara}{}%
\newcounter{totalcounter}
\renewcommand{\thetotalcounter}{\thechapter.\thesection.\arabic{totalcounter}}
\newcounter{defcounter}
\renewcommand{\thedefcounter}{\thechapter.\thesection.\arabic{defcounter}}

\NewTotalTColorBox[use counter = defcounter, number within = section]{\Definition}{ +m }{ 
notitle,
colback=green!5!white,
frame hidden,
boxrule=0pt,
enhanced,
sharp corners,
borderline west={4pt}{0pt}{green!50!black},
breakable = true,
label = {Def:\thedefcounter},
}{
\textcolor{green!50!black}{
    \sffamily
    \textbf{Definition~\thetcbcounter.}%k
}%
#1
}

\NewTotalTColorBox{\Remark}{ +m +m }{ 
notitle,
colback=yellow!5!white,
colbacklower=white,
frame hidden,
boxrule=0pt,
bicolor,
sharp corners,
borderline west={4pt}{0pt}{yellow!50!black},
%fontupper=\sffamily,
breakable = true,
label = {Rem:\thetotalcounter},
}{
\textcolor{yellow!50!black}{
    \sffamily
    \textbf{Remark~.}%
}%
#1
\if #2\kara \else 
\tcblower%
\textcolor{yellow!50!black}{
    \sffamily
    \textbf{Proof.}%
}%
#2
\qedsymbol
\fi
}

\NewTotalTColorBox[use counter = totalcounter, number within = section]{\Lemma}{ +m +m }{ 
notitle,
colback=orange!5!white,
colbacklower=white,
frame hidden,
boxrule=0pt,
bicolor,
sharp corners,
borderline west={4pt}{0pt}{orange!50!black},
fontupper=\sffamily,
breakable = true,
label = {Lem:\thetotalcounter},
}{
\textcolor{orange!50!black}{
    \sffamily
    \textbf{Lemma~\thetcbcounter.}%
}%
#1
\if #2\kara \else 
\tcblower%
\textcolor{orange!50!black}{
    \sffamily
    \textbf{Proof.}%
}%
#2
\qedsymbol
\fi
}


\NewTotalTColorBox[use counter = totalcounter, number within = section]{\Theorem}{ +m +m }{ 
notitle,
colback=blue!5!white,
colbacklower=white,
frame hidden,
boxrule=0pt,
bicolor,
sharp corners,
borderline west={4pt}{0pt}{blue!50!black},
fontupper=\sffamily,
breakable = true,
label = {Thm:\thetotalcounter},
}{
\textcolor{blue!50!black}{
    \sffamily
    \textbf{Theorem~\thetcbcounter.}%
}%
#1
\if #2\kara \else 
\tcblower%
\textcolor{blue!50!black}{
    \sffamily
    \textbf{Proof.}%
}%
#2
\qedsymbol
\fi
}

\NewTotalTColorBox[use counter = totalcounter, number within = section]{\Example}{ +m +m }{ 
notitle,
colback=cyan!5!white,
colbacklower=white,
frame hidden,
boxrule=0pt,
bicolor,
sharp corners,
borderline west={4pt}{0pt}{cyan!50!black},
%fontupper=\sffamily,
breakable = true,
label = {Ex:\thetotalcounter},
}{
\textcolor{cyan!50!black}{
    \sffamily
    \textbf{Example~\thetcbcounter.}%
}%
#1
\if #2\kara \else
\tcblower%
\textcolor{cyan!50!black}{
    \sffamily
    \textbf{Proof.}%
}%
#2
\qedsymbol
\fi
}

\NewTotalTColorBox[use counter = totalcounter, number within = section]{\Proposition}{ +m +m }{ 
notitle,
colback=red!5!white,
colbacklower=white,
frame hidden,
boxrule=0pt,
bicolor,
sharp corners,
borderline west={4pt}{0pt}{red!50!black},
fontupper=\sffamily,
breakable = true,
label = {Prop:\thetotalcounter},
}{
\textcolor{red!50!black}{
    \sffamily
    \textbf{Proposition~\thetcbcounter.}%
}%
#1
\if #2\kara \else 
\tcblower%
\textcolor{red!50!black}{
    \sffamily
    \textbf{Proof.}%
}%
#2
\qedsymbol
\fi
}
\NewTotalTColorBox[use counter = totalcounter, number within = section]{\Corollary}{ +m +m }{ 
notitle,
colback=darkgray!5!white,
colbacklower=white,
frame hidden,
boxrule=0pt,
bicolor,
sharp corners,
borderline west={4pt}{0pt}{darkgray!50!black},
fontupper=\sffamily,
breakable = true,
label = {Cor:\thetotalcounter},
before upper = {\savenotes},
after upper = {\spewnotes},
}{
\textcolor{darkgray!50!black}{
    \sffamily
    \textbf{Corollary~\thetcbcounter.}%
}%
#1
\if #2\kara \else 
\tcblower%
\textcolor{darkgray!50!black}{
    \sffamily
    \textbf{Proof.}%
}%
#2
\qedsymbol
\fi
}
\definecolor{background}{HTML}{FCF9EE}
\definecolor{linecolor}{HTML}{581810}
\newtcolorbox{conditionbox}{enhanced,
  boxsep=0.25ex,
  arc=0mm,
  borderline west={1pt}{-0.5pt}{linecolor},
  borderline east={1pt}{-0.5pt}{linecolor},
  colback=background,
  colframe=background,
  overlay={
    \foreach \n in {north east,north west,south east,south west}
      {%
      \draw [linecolor, fill=linecolor] (frame.\n) circle (2pt);
      };
  }
}

% \newtcbtheorem[use counter from = theorem]{mythm}{Theorem}%
% {
%   colback=white, % ボックス内の背景色
%   colframe=black, % フレームの色
%   fonttitle=\bfseries, % タイトルのフォント
% }{thm}

% % 証明環境の設定
% \newtcbtheorem[use counter from = theorem]{mypf}{Proof}%
% {
%   colback=white, 
%   colframe=black, 
%   fonttitle=\bfseries
% }{prf}

% % 定義環境の設定
% \newtcbtheorem[use counter from = theorem]{mydef}{Definition}%
% {
%   colback=white, 
%   colframe=black, 
%   fonttitle=\bfseries
% }{def}

\newtcolorbox{mybox}{
enhanced,
boxrule=0pt,frame hidden,
borderline west={4pt}{0pt}{green!75!black},
colback=green!10!white,
sharp corners
}

\newcommand{\mysetminusD}{\hbox{\tikz{\draw[line width=0.6pt,line cap=round] (3pt,0) -- (0,6pt);}}}
\newcommand{\mysetminusT}{\mysetminusD}
\newcommand{\mysetminusS}{\hbox{\tikz{\draw[line width=0.45pt,line cap=round] (2pt,0) -- (0,4pt);}}}
\newcommand{\mysetminusSS}{\hbox{\tikz{\draw[line width=0.4pt,line cap=round] (1.5pt,0) -- (0,3pt);}}}

\newcommand{\mysetminus}{\mathbin{\mathchoice{\mysetminusD}{\mysetminusT}{\mysetminusS}{\mysetminusSS}}}

\newcommand{\defi}{\stackrel{\mathrm{def}}{\equiv}}
\renewcommand{\ker}[1]{\mathrm{Ker}\, #1}
\newcommand{\im}[1]{\mathrm{Im}\, #1}
\newcommand{\coker}[1]{\mathrm{Coker}\, #1}
\renewcommand{\hom}[3]{\mathrm{Hom}_{#1}(#2,#3)}
\newcommand{\spec}[1]{\mathrm{Spec}\, #1}
\newcommand{\proj}[1]{\mathrm{Proj}\, #1}

\makeindex





\begin{document}

% \setlength{\topmargin}{-20truemm}
% \setlength{\headheight}{0pt}
% \setlength{\headsep}{0pt}
\setlength{\footskip}{20truemm}



% \setlength{\@tempdima}{1pt*\ratio{\dimexpr\textheight/\@lines}{\baselineskip}}
% \renewcommand{\baselinestretch}{\strip@pt\@tempdima}\selectfont

\makeatletter
\newcount\@chars\newcount\@lines
\@chars=40                      % 1行の文字数
\@lines=40                      % 1ページの行数

\newdimen\@kanjiskip
\@kanjiskip=\dimexpr(\textwidth-1zw*\@chars)/\numexpr\@chars-1
\newdimen\@@kanjiskip
\@@kanjiskip=\dimexpr\@kanjiskip/10

\baselineskip=\dimexpr\textheight/\@lines
\kanjiskip=\@kanjiskip plus \@@kanjiskip minus \@@kanjiskip
\parindent=\dimexpr 1zw+2truept
\parindent=\dimexpr\parindent+\@kanjiskip
\makeatother

% ↑は貼り付けただけなのでわからない.



\title{代数幾何まとめノート}
\date{\today}
\author{Fefr}
\maketitle



\setcounter{tocdepth}{2}
\tableofcontents
\clearpage
%--------------------本文--------------------%



\chapter{Scheme}
\input{chap2/1_zariski_topology.tex}
\input{chap2/2_algebraic_sets.tex}
\input{chap2/3_sheaves.tex}
\input{chap2/3-1_Bsheaf.tex}
\input{chap2/4_ringed_topological_space.tex}
\input{chap2/5_schemes.tex}
\input{chap2/5-1_morphism_of_schemes.tex}
\input{chap2/5-2_projective_schemes.tex}
\input{chap2/5-3_noetherian_schemes_algebraic_varieties.tex}
\input{chap2/5-4_reduced_schemes.tex}
\input{chap2/5-5_irreducible_components.tex}


\clearpage
\appendix
\chapter{Limit}
\input{appendix/1_limit/1_inductive_limit.tex}

\chapter{Manifold}
\input{appendix/2_manifold/1_smooth_manifold.tex}
\input{appendix/2_manifold/2_smooth_maps.tex}
\input{appendix/2_manifold/3_tangent_space.tex}
\input{appendix/2_manifold/3-1_differential.tex}
\input{appendix/2_manifold/4_vector_field.tex}
\input{appendix/2_manifold/5_vector_bundle.tex}

\input{appendix/2_manifold/6_deffirential_form.tex}

\chapter{Complex Analysis}
\input{appendix/3_complex_analysis/1_holomorphic_function.tex}
\input{appendix/3_complex_analysis/2_line_integral.tex}
\input{appendix/3_complex_analysis/3_cauchy's_integral_theorem.tex}
\input{appendix/3_complex_analysis/4_cauchy's_integral_formula.tex}
\input{appendix/3_complex_analysis/5_residue_theorem.tex}
\input{appendix/3_complex_analysis/6_several_variables.tex}
\begin{theindex}
    \printindex
\end{theindex}
\end{document}